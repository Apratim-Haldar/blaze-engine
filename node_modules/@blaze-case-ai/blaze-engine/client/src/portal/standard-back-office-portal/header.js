class HeaderComponent extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: "open" });

    const template = document.createElement("template");
    template.innerHTML = `
      <style>
        .portal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          background-color: #ffffff;
          border-bottom: 1px solid #e5e7eb;
          padding: 1rem 2rem;
          box-shadow: 0 1px 2px rgba(0,0,0,0.03);
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          width: 100%;
          box-sizing: border-box;
          position: relative;
        }
        
        .header-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
          width: 100%;
        }
        
        .left-section {
          display: flex;
          align-items: center;
          gap: 1rem;
        }
        
        .header-image {
          max-height: 40px;
          width: auto;
          object-fit: contain;
          border-radius: 4px;
        }
        
        .title {
          font-size: 1.25rem;
          font-weight: 600;
          color: #111827;
        }
        
        .right-section {
          display: flex;
          align-items: center;
          gap: 1.25rem;
        }
        
        .icon {
          width: 20px;
          height: 20px;
          cursor: pointer;
          opacity: 0.7;
          transition: opacity 0.2s ease;
        }
        
        .icon:hover {
          opacity: 1;
        }
        
        .profile {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          cursor: pointer;
          padding: 0.5rem;
          border-radius: 6px;
          transition: background-color 0.2s ease;
        }
        
        .profile:hover {
          background-color: #f3f4f6;
        }
        
        .avatar-icon {
          font-size: 1.6rem;
        }
        
        .username {
          font-size: 0.95rem;
          font-weight: 500;
          color: #374151;
        }
      </style>

      <header class="portal-header">
        <div class="header-content">
          <div class="left-section">
            <div class="title">Customer Due Diligence</div>
          </div>
          <div class="right-section">
            <img src="node_modules/@blaze-case-ai/blaze-engine/client/src/component/icons/bell-svgrepo-com.svg"
                 class="icon" alt="Notifications" />
            <div class="profile">
              <span class="avatar-icon">ðŸ‘¤</span>
              <span class="username">John Doe</span>
            </div>
          </div>
        </div>
      </header>
    `;

    shadow.appendChild(template.content.cloneNode(true));
  }

  // Method to add an image to the header
  addHeaderImage(imageSrc, altText = "Header Image") {
    const leftSection = this.shadowRoot.querySelector(".left-section");
    const existingImage = leftSection.querySelector(".header-image");

    if (existingImage) {
      existingImage.src = imageSrc;
      existingImage.alt = altText;
    } else {
      const img = document.createElement("img");
      img.src = imageSrc;
      img.alt = altText;
      img.className = "header-image";
      leftSection.insertBefore(img, leftSection.firstChild);
    }
  }
}

if (!customElements.get("header-component")) {
  customElements.define("header-component", HeaderComponent);
}